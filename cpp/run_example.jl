
import EGGO

# Example diagnostic data
shot = 168830
fwtmp2 = [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.0, 0.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.0, 1.0, 1.0, 1.0]
fwtsi = [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]

expsi = [-0.4033802002319999, 0.06076110283043938, 0.10853515679092042, 0.15641445005947727, 0.1660594820489152, -0.11031321378098395, 0.5896888595615067, 0.1753863205962317, 0.088503716473891, -0.006736425708497283, 0.0380201053265609, 0.09299474023561918, 0.18626762407768788, 0.21683726509048587, -0.09977765782429186, -0.10873433915110613, 0.19441311835928618, 0.10148185329008365, 0.011709894683019983, 0.044467497616696994, 0.0923198628231168, 0.1355893842074772, 0.15601260656990892, 0.16695561530681619, 0.0916941833019791, -0.06146592144899354, -0.04386941444183142, -0.15388324682855725, -0.08224239929633187, 0.028333176401003295, 0.07246295585820689, 0.14302804900543153, 0.1965329452133967, 0.20757885694694528, 0.07730990109015949, -0.07111951762372472, -0.044894917507311526, 0.04801603600667154, -0.06804283453097908, 0.168213291249242, 0.1298883611810984, 0.16620308388694635, 0.1388520455946071, 0.10336328686838459]
expmp2 = [0.5751758217811584, 0.5777432918548584, 0.2995361089706421, 0.5352239012718201, 0.4268638491630554, 0.3233080506324768, 0.17644630372524261, 0.30761346220970154, 0.1082150787115097, 0.2665691375732422, 0.25748637318611145, 0.26021692156791687, 0.29702144861221313, 0.360135555267334, 0.3123251497745514, 0.5910444259643555, 0.39638155698776245, 0.580190896987915, 0.5035938620567322, 0.42172273993492126, 0.2821279466152191, 0.3101239502429962, 0.5534896850585938, 0.23387545347213745, 0.30140069127082825, 0.289532333612442, 0.29198628664016724, 0.3242175579071045, 0.35721850395202637, -0.05749744176864624, -0.010924776084721088, 0.03236999735236168, 0.09824628382921219, 0.12703147530555725, 0.19003534317016602, 0.2579684555530548, 0.2565344572067261, 0.2962685525417328, 0.3557198643684387, 0.3125780522823334, 0.36826983094215393, 0.3251114785671234, 0.3021714389324188, 0.30776268243789673, 0.2574252486228943, 0.13159792125225067, 0.05727966129779816, 0.027812741696834564, -0.0451042503118515, -0.12220883369445801, -0.024340426549315453, 0.24090157449245453, 0.4052409827709198, 0.5804176330566406, 0.5786687135696411, 0.5555588603019714, 0.30065643787384033, 0.13553518056869507, -0.02408536896109581, -0.036081016063690186, -0.041902780532836914, 0.09766237437725067, 0.09371349960565567, 0.08389651775360107, -0.0326533168554306, -0.024524418637156487, -0.5368168950080872, -0.14827822148799896, -0.046501222997903824, -0.05045483633875847, 0.06118004024028778, 0.020677056163549423, 0.0, 0.04194311797618866, 0.06540253013372421, 0.06637807935476303]

fcurrt = [-249457.546875, -68876.06201171875, -2278.434410095215, 141849.37939453125, 86605.60424804688, -219819.0478515625, -165385.4296875, 114270.47143554688, -21949.81216430664, -265337.65234375, -136116.3427734375, -74327.11328125, 199696.208984375, 200311.96337890625, -214281.10107421875, -206268.06030273438, 77999.93920898438, -21844.74853515625]
ecurrt = [-41790.4296875, -40929.421875, -41262.1875, -40731.24609375, -41504.9609375, -40838.37109375]

Ip = 1.2601925881818281e6
r_tom = [1.9539998769760132, 1.9239999055862427, 1.8903999328613281, 1.830199956893921, 1.7582000494003296, 1.6689000129699707, 1.9936000108718872, 2.0167999267578125, 2.039900064468384, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694, 1.9399999380111694]
z_tom = [-0.06669999659061432, -0.06520000100135803, -0.06134999915957451, -0.056849997490644455, -0.0539499968290329, -0.043949998915195465, -0.07045000046491623, -0.07169999927282333, -0.07369999587535858, 0.8258000016212463, 0.8137999773025513, 0.8027999401092529, 0.7897999882698059, 0.7767999768257141, 0.7637999653816223, 0.755299985408783, 0.7493000030517578, 0.7437999844551086, 0.7368000149726868, 0.7307999730110168, 0.7247999906539917, 0.7187999486923218, 0.7132999897003174, 0.7062999606132507, 0.7002999782562256, 0.6937999725341797, 0.6873000264167786, 0.6812999844551086, 0.6753000020980835, 0.6683000326156616, 0.6612999439239502, 0.6537999510765076, 0.6482999920845032, 0.6412999629974365, 0.6342999935150146, 0.6243000030517578, 0.6102999448776245, 0.5942999720573425, 0.579800009727478, 0.5637999773025513, 0.5317999720573425, 0.4763000011444092, 0.39229997992515564, 0.3967999815940857, 0.35580000281333923, 0.31779998540878296, 0.26479998230934143, 0.16429999470710754, 0.028800001367926598, 0.10429999977350235, 0.21079999208450317, 0.4383000135421753, 0.4592999815940857, 0.4968000054359436]
ne_tom = [5.237353434510996e19, 5.065215213480339e19, 4.988054566075577e19, 5.116066306851026e19, 5.278354223110763e19, 4.988761771954563e19, 5.4412974483006554e19, 5.513005837445602e19, 5.554126252910471e19, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2.9839893456329114e18, 3.448103649077625e18, 0.0, 0.0, 0.0, 0.0, 1.2463247974840926e19, 2.227819245181128e19, 3.8450814426768474e19, 4.673565653229319e19, 5.5197616766913085e19, 6.171506869757857e19, 5.7428508267484545e19, 5.787191931673405e19, 5.555832255152128e19, 5.5606344821376025e19, 5.6245420561858036e19, 5.76350053472739e19, 5.684361206197282e19, 5.636408865282064e19, 5.587916004450632e19, 5.828891130059135e19, 5.8045431047690125e19, 5.576460412703159e19, 5.749289566840711e19, 5.836300958821043e19, 5.537314720121776e19, 5.396744797338521e19, 5.38293713031691e19, 5.570082365652756e19, 5.302829351945057e19, 4.929878526240647e19, 5.034797884004893e19, 5.598814363705147e19, 5.61634981494957e19, 5.577076139214714e19, 5.554917461477818e19]
Te_tom = [2388.30078125, 2541.4091796875, 2617.17236328125, 2833.367431640625, 3141.406982421875, 2672.0595703125, 2228.572265625, 1711.920654296875, 1775.5679931640625, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 13.264994621276855, 10.19906997680664, 0.0, 0.0, 0.0, 0.0, 38.132110595703125, 77.92255401611328, 196.4862823486328, 300.4635009765625, 384.357177734375, 403.9305725097656, 469.2989501953125, 531.734375, 528.7698974609375, 523.0098266601562, 662.8626708984375, 624.1710205078125, 621.0045166015625, 703.0703735351562, 728.0448608398438, 761.5218505859375, 813.0936279296875, 818.2413330078125, 1034.0728759765625, 1269.468994140625, 1287.1326904296875, 1405.8865966796875, 1593.55615234375, 1869.154296875, 2035.17236328125, 2447.593505859375, 2391.7333984375, 2011.9029541015625, 1180.7001953125, 1010.9199829101562, 950.290283203125]
#IMAS only stores only n_i/n_e for CER??? filling with dummy data for now.
r_cer = [1.8]
z_cer = [0.0]
nc_cer = [1.e19]

#Get basis functions and green's function tables
model_name = :d3d_cakenn_free
green = EGGO.get_greens_function_tables(model_name)
basis_functions = EGGO.get_basis_functions(model_name)
basis_functions_1d, bf1d_itp = EGGO.get_basis_functions_1d(model_name)
#wall = EGGO.get_wall(model_name)
NNmodel = EGGO.get_model(model_name)
NNmodel1D = EGGO.get_model1d(model_name)

# Predict equilibrium

y_psi,y1d = EGGO.predict_psipla_free(shot,expsi,fwtsi,expmp2,fwtmp2,fcurrt,ecurrt,Ip,NNmodel,NNmodel1D,green,basis_functions)

